<!-- é¦–é¡µ -->
<view class="home-page">
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <view class="top-nav">
    <!-- å·¦ä¾§ï¼šç”¨æˆ·ä¿¡æ¯ -->
    <view class="user-section" bindtap="onUserInfoTap">
      <view class="user-avatar">
        <image 
          class="avatar-img" 
          src="{{userInfo.avatar}}" 
          mode="aspectFill"
        />
      </view>
      <view class="user-info">
        <text class="user-name">{{userInfo.name}}</text>
        <text class="user-dept">å·¥å·:{{userInfo.employeeNo}}</text>
      </view>
    </view>
    
    <!-- å³ä¾§ï¼šæ¶ˆæ¯å’Œæœç´¢ -->
    <view class="nav-right">
      <!-- <view class="nav-icon message-icon" bindtap="onMessageCenter">
        <text class="icon-text">ğŸ””</text>
        <view class="message-badge" wx:if="{{statistics.pendingTasks > 0}}">
          <text class="badge-text">{{statistics.pendingTasks > 99 ? '99+' : statistics.pendingTasks}}</text>
        </view>
      </view> -->
      <view class="nav-icon search-icon" bindtap="onSearch">
        <text class="icon-text">ğŸ”</text>
      </view>
    </view>
  </view>
  
  <!-- æ—¶é—´å¤©æ°”åŒºåŸŸ -->
  <view class="time-weather-section">
    <view class="time-section">
      <text class="current-time">{{currentTime}}</text>
    </view>
    <view class="refresh-btn" bindtap="onRefresh">
      <text class="refresh-icon">ğŸ”„</text>
    </view>
  </view>
  
  <!-- è½®æ’­å›¾ -->
  <view class="swiper-section">
    <swiper 
      class="home-swiper" 
      indicator-dots="{{true}}" 
      autoplay="{{true}}" 
      interval="{{3000}}" 
      duration="{{500}}"
      circular="{{true}}"
      bindchange="onSwiperChange"
    >
      <block wx:for="{{swiperList}}" wx:key="id">
        <swiper-item>
          <view class="swiper-item" bindtap="onSwiperTap" data-index="{{index}}">
            <image class="swiper-img" src="{{item.imageUrl}}" mode="aspectFill" />
            <view class="swiper-mask"></view>
            <text class="swiper-title">{{item.title}}</text>
          </view>
        </swiper-item>
      </block>
    </swiper>
    <view class="swiper-indicator">
      <text class="current-index">{{currentSwiperIndex + 1}}</text>
      <text class="divider">/</text>
      <text class="total-index">{{swiperList.length}}</text>
    </view>
  </view>
  
  <!-- æ•°æ®ç»Ÿè®¡å¡ç‰‡ -->
  <view class="statistics-section">
    <view class="stat-card" bindtap="onTodayProductionTap">
      <view class="stat-header">
        <text class="stat-icon">ğŸ“ˆ</text>
        <text class="stat-title">ä»Šæ—¥äº§é‡</text>
      </view>
      <view class="stat-content">
        <text class="stat-number">{{statistics.todayProduction}}</text>
        <text class="stat-unit">ä»¶</text>
      </view>
      <view class="stat-footer">
        <text class="compare-text">è¾ƒæ˜¨æ—¥</text>
        <text class="compare-rate {{statistics.productionRate.includes('+') ? 'up' : 'down'}}">
          {{statistics.productionRate}}
        </text>
      </view>
    </view>
    
    <view class="stat-card" bindtap="onQualityRateTap">
      <view class="stat-header">
        <text class="stat-icon">âœ…</text>
        <text class="stat-title">åˆæ ¼ç‡</text>
      </view>
      <view class="stat-content">
        <text class="stat-number">{{statistics.qualityPassRate}}</text>
        <text class="stat-unit">%</text>
      </view>
      <view class="stat-footer">
        <text class="target-text">ç›®æ ‡: 98%</text>
        <text class="target-status {{statistics.qualityPassRate >= 98 ? 'achieved' : 'not-achieved'}}">
          {{statistics.qualityPassRate >= 98 ? 'è¾¾æ ‡' : 'æœªè¾¾æ ‡'}}
        </text>
      </view>
    </view>
  </view>
  
  <!-- åŠŸèƒ½æ¨¡å— -->
  <view class="modules-section">
    <view class="section-header">
      <text class="section-title">åŠŸèƒ½æ¨¡å—</text>
      <view class="section-subtitle">
        <text class="subtitle-text">ç‚¹å‡»ä½¿ç”¨ç›¸åº”åŠŸèƒ½</text>
      </view>
    </view>
    
    <view class="modules-grid">
      <view 
        class="module-item {{item.enabled ? 'enabled' : 'disabled'}}" 
        wx:for="{{functionModules}}" 
        wx:key="id"
        bindtap="onModuleTap"
        data-id="{{item.id}}"
      >
        <view class="module-icon" style="background: {{item.color}}22; color: {{item.color}}">
          <text class="icon-text">{{item.icon}}</text>
        </view>
        <text class="module-title">{{item.title}}</text>
        <text class="module-desc">{{item.description}}</text>
        <view class="module-status" wx:if="{{!item.enabled}}">
          <text class="status-text">å¼€å‘ä¸­</text>
        </view>
      </view>
    </view>
  </view>
  
  <!-- é€šçŸ¥å…¬å‘Š -->
  <view class="notice-section">
    <view class="section-header">
      <text class="section-title">é€šçŸ¥å…¬å‘Š</text>
      <view class="view-all" bindtap="viewAllNotices">
        <text class="view-text">æŸ¥çœ‹å…¨éƒ¨</text>
        <text class="arrow-icon">â€º</text>
      </view>
    </view>
    
    <view class="notice-list">
      <view 
        class="notice-item" 
        wx:for="{{noticeList}}" 
        wx:key="id"
        bindtap="onNoticeTap"
        data-id="{{item.id}}"
      >
        <view class="notice-left">
          <view class="notice-badge" wx:if="{{item.isNew}}">
            <text class="badge-text">NEW</text>
          </view>
          <text class="notice-title">{{item.title}}</text>
        </view>
        <view class="notice-right">
          <text class="notice-time">{{item.time}}</text>
          <text class="notice-arrow">â€º</text>
        </view>
      </view>
    </view>
  </view>
  
  <!-- å¿«æ·æ“ä½œ -->
  <!-- <view class="quick-actions">
    <view class="section-header">
      <text class="section-title">å¿«æ·æ“ä½œ</text>
    </view>
    
    <view class="actions-grid">
      <view 
        class="action-item" 
        wx:for="{{quickActions}}" 
        wx:key="id"
        bindtap="onQuickActionTap"
        data-action="{{item.action}}"
      >
        <view class="action-icon">
          <text class="icon-text">{{item.icon}}</text>
        </view>
        <text class="action-title">{{item.title}}</text>
      </view>
    </view>
  </view> -->
  
  <!-- åº•éƒ¨ä¿¡æ¯ -->
  <view class="bottom-info">
    <text class="company-name">Â© 2025 æ™ºèƒ½ç”Ÿäº§ç®¡ç†ç³»ç»Ÿ</text>
    <text class="system-version">Version 1.0.0</text>
  </view>
</view>